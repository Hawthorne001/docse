diff --git a/_lib/vite/utils/search.js b/_lib/vite/utils/search.js
index 2f120d050574cecfae452d746a025c89e31652f9..c0653118980cce351e08cabe8af50ac179b0e5f2 100644
--- a/_lib/vite/utils/search.js
+++ b/_lib/vite/utils/search.js
@@ -27,7 +27,11 @@ export async function buildIndex({ baseDir, cacheDir }) {
         const pageCache = cache.get(key) ?? {};
         if (pageCache.mdx === mdx)
             return pageCache.document;
-        const { html, frontmatter } = await processMdx(pagePath, mdx, { rehypePlugins });
+        
+        const mdxNoImports = mdx.replace(/^(import|export).*/gm, '');
+        const mdxNoComponents = mdxNoImports.replace(/<\/?\s*[A-Z][^>]*>/g, '');
+        const { html, frontmatter } = await processMdx(pagePath, mdxNoComponents, { rehypePlugins });
+
         if (frontmatter.searchable === false) {
             cache.set(key, { mdx, document: [] });
             return [];
@@ -41,8 +45,9 @@ export async function buildIndex({ baseDir, cacheDir }) {
         const relFile = slash(relative(baseDir, fileId));
         const href = relFile
             .replace(relative(baseDir, resolve(baseDir, 'pages')), '')
-            .replace(/\.(.*)/, '')
+            .replace(/\.(md|mdx)$/, '')
             .replace(/\/index$/, '');
+
         const document = sections.map((section) => ({
             href: `${href}#${section.anchor}`,
             html: section.html,
